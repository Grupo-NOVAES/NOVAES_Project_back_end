<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/css/stage.css}" />
    <link rel="stylesheet" th:href="@{/css/components/header.css}" />
    <link rel="stylesheet" th:href="@{/css/components/nav.css}" />
    <link rel="stylesheet" th:href="@{/css/components/darkTheme.css}" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <script src="https://kit.fontawesome.com/a56b5a1294.js" crossorigin="anonymous"></script>
    <title>Etapas</title>
</head>
<body>
    <!-- Agrupa os elementos que compõe o cabeçalho. -->
    <div th:replace="fragments/header :: header"></div>


	<div th:replace="fragments/nav :: nav"></div>
  <div class="container">
	<main>


      <div class="header-table">
        <div class="container-input">
          <input type="text" placeholder="Buscar" name="text" class="input" />
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20px"
            heigh="20px"
            viewBox="0 0 512 512"
          >
            <!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
            <path
              fill="#1e3050"
              d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"
            />
          </svg>
        </div>

        <div class="btnCreate">
          <button class="CartBtn" onclick="showModalStage()">
            <span class="IconContainer">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                height="1em"
                viewBox="0 0 576 512"
                fill="#989EA7"
                class="cart"
              >
                <!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                <path d="M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"/>
              </svg>
            </span>
            <p class="text">Adicionar Etapa</p>
          </button>
        </div>

        <!--
        <div>
          <p th:href="@{/stages/{id}(id=${stages.contract_id})}"></p>
        </div>>
        -->
      </div>


		<div class="AddModalStage" id="AddModalStage">
		  <div class="labelinput">
				<form th:action="@{/stages}" method="post">
          <div class="form">
				    <label for="title">Titulo da Etapa</label>
				    <input type="text" name="title" id="title" class="inputlabel">
				    <label for="description">Descrição da Etapa</label>
				    <input type="text" name="description" id="description" class="inputlabel">
				    <label for="datehour">Data limite da Etapa </label>
				    <input type="date" name="dateHour" id="datehour" class="inputlabeldate">
				    <input type="hidden" name="contract.id" th:value="${contract.id}" />
          </div>
				    <div class="actions">
				        <button type="submit" class="savebtn">Salvar</button>
				        <p onclick="hideButton()">Sair</p>
				    </div>
				</form>
		  </div>
    </div>


    <div class="table-container">
      <table>
        <tbody>
          <tr  id="stages" class="folderItem" th:each="stages : ${listStages}" th:data-id="${stages.id}" th:data-name="${stages.title}">
            <td>
              <i class="fa-solid fa-clock fa-2xl"></i>
            </td>
            <td th:text="${stages.title}"></td>
            <td th:text="${stages.description}"></td>
            <td th:text="${stages.dateHour}"></td>
            <td th:text="${stages.status}"></td>
            <td style="white-space: nowrap">
              <button
              style="
                  border: none;
                  height: 50px;
                  width: 50px;
                  border-radius: 15px;
                  background-color: none;
              "
              onclick="showModalActionsStage(this)"
          >
              <i class="fa-solid fa-ellipsis-vertical fa-xl"></i>
          </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>


    <div id="ModalOptions" class="ModalOptions">
      <button onclick="showModalEditStage()" class="btnOption">
        <i class="fa-solid fa-pencil fa-sm" style="color: #1e3050"></i>
        Editar
      </button>
      <button onclick="confirmDeleteStage()" class="btnOption">
        <i class="fa-solid fa-trash fa-sm" style="color: #1e3050"></i> Deletar
      </button>
      <button class="btnOption" onclick="confirmConcludeStage()">
        <i class="fa-regular fa-circle-check" style="color: #1e3050;"></i> Concluir
      </button>
  </div>

  <div class="EditModalContract" id="EditModalContract">
    <p class="ModalTitle">Editar Etapa</p>
    <div class="labelinput">
      <label for="titleStage">Titulo</label>
      <input type="text" class="inputlabel" id="name"/>
      <label for="descriptionStage">Descrição</label>
      <input type="text" name="inputRedescriptStage" id="description" class="inputlabel">
      <label for="date">Data</label>
      <input type="date" name="datehour" id="datehour" class="inputlabeldate">
    </div>

    <div class="actions">
      <button class="savebtn" onclick="saveButtonEditContract()">
        Salvar
      </button>
      <p onclick="hideModalEditStage()">Sair</p>
    </div>
  </div>

    </div>
  </main>

</div>
<script th:src="@{/js/darkTheme.js}"></script>
<script th:src="@{/js/logout.js}"></script>
<script th:src="@{/js/stage.js}"></script>
</body>
</html>